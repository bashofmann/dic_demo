services:
  logger_factory:
    class: \dicdemo\output\LoggerProvider
    arguments:
      [@frontController]
  logger:
    class: \Monolog\Logger
    factory_service: logger_factory
    factory_method: get
  frontController:
    class: \dicdemo\FrontController
  memcachedConnection:
    class: \dicdemo\services\connectors\cache\MemcachedConnection
  sqliteConnection:
    class: \dicdemo\services\connectors\sqlite\SqliteConnection
    arguments:
      [@frontController]
  innerUserConnector:
    class: \dicdemo\services\connectors\sqlite\SqliteUserConnector
    arguments:
      [@sqliteConnection]
  defaultUserConnector:
    class: \dicdemo\services\connectors\cache\MemcachedUserConnector
    arguments:
      [@innerUserConnector,@memcachedConnection]
    calls:
      - [ setLogger, [ @logger ] ]
  output:
    class: \dicdemo\output\ConsoleOutput
  birthday_controller:
    class: \dicdemo\controllers\BirthdayController
    arguments:
      [@output]
  user_service:
    class: \dicdemo\services\UserService
    arguments:
      [@defaultUserConnector]
    calls:
      - [ setLogger, [ @logger ] ]